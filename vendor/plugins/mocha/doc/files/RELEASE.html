<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: RELEASE</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>RELEASE</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>RELEASE
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Jul 14 17:01:49 -0700 2007</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>0.5.2 (r159)</h1>
<ul>
<li>Fix bug 11885 - &quot;never doesn&#8216;t work with stub_everything&quot;
submitted by Alexander Lang. In fixing this bug, also fixed undiscoverd bug
where expected &amp; actual invocation counts were being incorrectly
reported which seems to have been introduced when fixes were added for
invocation dispatch (see MockedMethodDispatchAcceptanceTest).

</li>
<li>Previously when an expectation did not allow more invocations, it was
treated as not matching. Now we prefer matching expectations which allow
more invocations, but still match expectations which cannot allow more
invocations. I think this may be overcomplicating things, but let&#8216;s
see how it goes.

</li>
</ul>
<h1>0.5.1 (r149)</h1>
<ul>
<li>Fixed bug 11583 &quot;Mocha 0.5.0 throwing unexpected warnings&quot;. Also
switched on ruby warning for all rake test tasks. Fixed majority of
warnings, but some left to fix.

</li>
</ul>
<h1>0.5.0 (r147)</h1>
<ul>
<li>Parameter Matchers - Iâ€™ve added a few Hamcrest-style parameter matchers
which are designed to be used inside Expectation#with. The following
matchers are currently available: anything(), includes(), has_key(),
has_value(), has_entry(), all_of() &amp; any_of(). More to follow soon. The
idea is eventually to get rid of the nasty parameter_block option on
Expectation#with.

<p>
object = mock() object.expects(:method).with(has_key(&#8216;key_1&#8217;))
object.method(&#8216;key_1&#8217; =&gt; 1, &#8216;key_2&#8217; =&gt; 2) #
no verification error raised
</p>
<p>
object = mock() object.expects(:method).with(has_key(&#8216;key_1&#8217;))
object.method(&#8216;key_2&#8217; =&gt; 2) # verification error raised,
because method was not called with Hash containing key: &#8216;key_1&#8216;
</p>
</li>
<li>Values Returned and Exceptions Raised on Consecutive Invocations - Allow
multiple calls to Expectation#returns and Expectation#raises to build up a
sequence of responses to invocations on the mock. Added syntactic sugar
method Expectation#then to allow more readable expectations.

<p>
object = mock() object.stubs(:method).returns(1,
2).then.raises(Exception).then.returns(4) object.method # =&gt; 1
object.method # =&gt; 2 object.method # =&gt; raises exception of class
Exception object.method # =&gt; 4
</p>
</li>
<li>Yields on Consecutive Invocations - Allow multiple calls to yields on
single expectation to allow yield parameters to be specified for
consecutive invocations.

<p>
object = mock() object.stubs(:method).yields(1, 2).then.yields(3)
object.method { |*values| p values } # =&gt; [1, 2] object.method {
|*values| p values } # =&gt; [3]
</p>
</li>
<li>Multiple Yields on Single Invocation - Added Expectation#multiple_yields to
allow a mocked or stubbed method to yield multiple times for a single
invocation.

<p>
object = mock() object.stubs(:method).multiple_yields([1, 2], [3])
object.method { |*values| p values } # =&gt; [1, 2] # =&gt; [3]
</p>
</li>
<li>Invocation Dispatch - Expectations were already being matched in reverse
order i.e. the most recently defined one was being found first. This is
still the case, but we now stop matching an expectation when its maximum
number of expected invocations is reached. c.f. JMock v1. A stub will never
stop matching by default. Hopefully this means we can soon get rid of the
need to pass a Proc to Expectation#returns.

<p>
object = mock() object.stubs(:method).returns(2)
object.expects(:method).once.returns(1) object.method # =&gt; 1
object.method # =&gt; 2 object.method # =&gt; 2 # no verification error
raised
</p>
<p>
# The following should still work&#8230;
</p>
<p>
Time.stubs(:now).returns(Time.parse(&#8216;Mon Jan 01 00:00:00 UTC
2007&#8217;)) Time.now # =&gt; Mon Jan 01 00:00:00 UTC 2007
Time.stubs(:now).returns(Time.parse(&#8216;Thu Feb 01 00:00:00 UTC
2007&#8217;)) Time.now # =&gt; Thu Feb 01 00:00:00 UTC 2007
</p>
</li>
<li>Deprecate passing an instance of Proc to Expectation#returns.

</li>
<li>Explicitly include all Rakefile dependencies in project.

</li>
<li>Fixed old Stubba example.

</li>
<li>Fix so that it is possible for a stubbed method to raise an Interrupt
exception without a message in Ruby 1.8.6

</li>
<li>Added responds_like and quacks_like.

</li>
<li>Capture standard object methods before Mocha adds any.

</li>
<li>Added Expectation#once method to make interface less surprising.

</li>
<li>Use Rake::TestTask to run tests. Created three separate tasks to run unit,
integration &amp; acceptance tests. Split inspect_test into one file per
TestCase. Deleted superfluous all_tests file.

</li>
<li>Fiddled with mocha_inspect and tests to give more sensible results on x86
platform.

</li>
<li>Fixed bug 7834 &quot;infinite_range.rb makes incorrect assumption about
to_f&quot; logged by James Moore.

</li>
</ul>
<h1>0.4.0 (r92)</h1>
<ul>
<li>Allow naming of mocks (patch from Chris Roos).

</li>
<li>Specify multiple return values for consecutive calls.

</li>
<li>Improved consistency of expectation error messages.

</li>
<li>Allow mocking of <a href="../classes/Object.html">Object</a> instance
methods e.g. kind_of?, type.

</li>
<li>Provide aliased versions of expects and stubs to allow mocking of these
methods.

</li>
<li>Added at_least, at_most, at_most_once methods to expectation.

</li>
<li>Allow expects and stubs to take a hash of method and return values.

</li>
<li>Eliminate warning: &quot;instance variable @yield not initialized&quot;
(patch from Xavier Shay).

</li>
<li>Restore instance methods on partial mocks (patch from Chris Roos).

</li>
<li>Allow stubbing of a method with non-word characters in its name (patch from
Paul Battley).

</li>
<li>Removed coupling to Test::Unit.

</li>
<li>Allow specified exception instance to be raised (patch from Chris Roos).

</li>
<li>Make mock object_id appear in hex like normal Ruby inspect (patch from Paul
Battley).

</li>
<li>Fix path to object.rb in rdoc rake task (patch from Tomas Pospisek).

</li>
<li>Reverse order in which expectations are matched, so that last expectation
is matched first. This allows e.g. a call to stubs to be effectively
overridden by a call to expects (patch from Tobias Lutke).

</li>
<li>Stubba &amp; SmartTestCase modules incorporated into Mocha module so only
need to require &#8216;mocha&#8217; - no longer need to require
&#8216;stubba&#8217;.

</li>
<li>AutoMocha removed.

</li>
</ul>
<h1>0.3.3</h1>
<ul>
<li>Quick bug fix to restore instance methods on partial mocks (for Kevin
Clark).

</li>
</ul>
<h1>0.3.2</h1>
<ul>
<li>Examples added.

</li>
</ul>
<h1>0.3.1</h1>
<ul>
<li>Dual licensing with MIT license added.

</li>
</ul>
<h1>0.3.0</h1>
<ul>
<li>Rails plugin.

</li>
<li>Auto-verify for expectations on concrete classes.

</li>
<li>Include each expectation verification in the test result assertion count.

</li>
<li>Filter out noise from assertion backtraces.

</li>
<li>Point assertion backtrace to line where failing expectation was created.

</li>
<li>New yields method for expectations.

</li>
<li>Create stubs which stub all method calls.

</li>
<li>Mocks now respond_to? expected methods.

</li>
</ul>
<h1>0.2.1</h1>
<ul>
<li>Rename MochaAcceptanceTest::Rover#move method to avoid conflict with Rake
(in Ruby 1.8.4 only?)

</li>
</ul>
<h1>0.2.0</h1>
<ul>
<li>Small change to SetupAndTeardown#teardown_stubs suggested by Luke Redpath
(<a href="http://www.lukeredpath.co.uk">www.lukeredpath.co.uk</a>) to allow
use of Stubba with RSpec (<a
href="http://rspec.rubyforge.org">rspec.rubyforge.org</a>).

</li>
<li>Reorganized directory structure and extracted addition of setup and
teardown methods into SmartTestCase mini-library.

</li>
<li>Addition of auto-verify for Mocha (but not Stubba). This means there is
more significance in the choice of expects or stubs in that any expects on
a mock will automatically get verified.

</li>
</ul>
<p>
So instead of&#8230;
</p>
<pre>
  wotsit = Mocha.new
  wotsit.expects(:thingummy).with(5).returns(10)
  doobrey = Doobrey.new(wotsit)
  doobrey.hoojamaflip
  wotsit.verify
</pre>
<p>
you need to do&#8230;
</p>
<pre>
  wotsit = mock()
  wotsit.expects(:thingummy).with(5).returns(10)
  doobrey = Doobrey.new(wotsit)
  doobrey.hoojamaflip
  # no need to verify
</pre>
<p>
There are also shortcuts as follows&#8230;
</p>
<p>
instead of&#8230;
</p>
<pre>
  wotsit = Mocha.new
  wotsit.expects(:thingummy).returns(10)
  wotsit.expects(:summat).returns(25)
</pre>
<p>
you can have&#8230;
</p>
<pre>
  wotsit = mock(:thingummy =&gt; 5, :summat =&gt; 25)
</pre>
<p>
and instead of&#8230;
</p>
<pre>
  wotsit = Mocha.new
  wotsit.stubs(:thingummy).returns(10)
  wotsit.stubs(:summat).returns(25)
</pre>
<p>
you can have&#8230;
</p>
<pre>
  wotsit = stub(:thingummy =&gt; 5, :summat =&gt; 25)
</pre>
<h1>0.1.2</h1>
<ul>
<li>Minor tweaks

</li>
</ul>
<h1>0.1.1</h1>
<ul>
<li>Initial release.

</li>
</ul>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-625523-2";
urchinTracker();
</script>

</body>
</html>