<html><head><link rel="stylesheet" media="screen" href="coderay.css" type="text/css"></head><body><div class="CodeRay">
  <div class="code"><pre><span class="r">class</span> <span class="cl">Enterprise</span>

  <span class="r">def</span> <span class="fu">initialize</span>(dilithium)
    <span class="iv">@dilithium</span> = dilithium
  <span class="r">end</span>

  <span class="r">def</span> <span class="fu">go</span>(warp_factor)
    warp_factor.times { <span class="iv">@dilithium</span>.nuke(<span class="sy">:anti_matter</span>) }
  <span class="r">end</span>

<span class="r">end</span>

require <span class="s"><span class="dl">'</span><span class="k">test/unit</span><span class="dl">'</span></span>
require <span class="s"><span class="dl">'</span><span class="k">rubygems</span><span class="dl">'</span></span>
require <span class="s"><span class="dl">'</span><span class="k">mocha</span><span class="dl">'</span></span>

<span class="r">class</span> <span class="cl">EnterpriseTest</span> &lt; <span class="co">Test</span>::<span class="co">Unit</span>::<span class="co">TestCase</span>

  <span class="r">def</span> <span class="fu">test_should_boldly_go</span>
    dilithium = mock()
    dilithium.expects(<span class="sy">:nuke</span>).with(<span class="sy">:anti_matter</span>).at_least_once  <span class="c"># auto-verified at end of test</span>
    enterprise = <span class="co">Enterprise</span>.new(dilithium)
    enterprise.go(<span class="i">2</span>)
  <span class="r">end</span>

<span class="r">end</span>
</pre></div>
</div>
</body></html>